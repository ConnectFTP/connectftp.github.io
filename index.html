<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset=utf-8>
  <meta http-equiv=X-UA-Compatible content="IE=edge">
  <meta name=viewport content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/g/bootstrap@3.3.6(css/bootstrap.min.css),bootstrap-social@4.11.0,spinkit,animatecss">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/fontawesome/4.5.0/css/font-awesome.min.css">

  <title>FTP for Dropbox &middot; Free Trial</title>
  <meta name="description" content="Use Dropbox with your favorite FTP enabled apps and devices. Upload videos and images from your wireless camera to your Dropbox.">
  <meta name="keywords" content="dropbox,ftp,camera,wifi camera, ip camera">
  <meta property="og:image" content="https://ftpfordropbox.com/facebook-preview.png" />

  <script type="text/javascript">
!function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.1.0";
analytics.load(
  window.location.host === 'ftpfordropbox.com'
    ? "ym0oVfgV6zanOtmH1SuFjgLnt31nsOs4"
    : "vPzoPNPYDogMwhoQPdO8JGB9YwVsgtWF"
  );
analytics.page()
}}();
</script>

<style type="text/css">

  html {
    position: relative;
    min-height: 100%;
  }

  body {
    margin-bottom: 4em;
    color: #7b8994;
    text-align: center;
  }

  footer {
    position: absolute;
    bottom: 0;
    width: 100%;
    /* Set the fixed height of the footer here */
    height: 60px;
    x-background-color: #f5f5f5;
    text-align: center;

    line-height: 60px;
    vertical-align: middle;
  }

  footer a {
    color: #7b8994;
  }

  .btn.btn-xl {
    font-size: 32px;
    font-weight: 300;
    line-height: 2em;
    border-radius: 999px;
    padding: 0.25em 2em;
  }

  #hero .jumbotron {
    background: transparent;
  }

  h1, h2, h3 {
    font-weight: 300;
  }

  #hero h1 {
    font-weight: 100;
    margin-bottom: 1.5em;
  }

  #hero .image {
    background: transparent url('hero.png') center center no-repeat;
    width: 100%;
    height: 128px;
  }

  #connect-to-dropbox {
    text-align: center;
  }

  #connect-to-dropbox .btn {
    margin-bottom: 1.5em;
  }

  #user-signed-up-waiting {
    text-align: center;
  }

  #please-wait {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    z-index: 9999;
    background: white;
    opacity: 0.9;

    -webkit-transform-style: preserve-3d;
    -moz-transform-style: preserve-3d;
    transform-style: preserve-3d;
  }

  #please-wait .sk-three-bounce {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translateX(-50%) translateY(-50%);
    margin: 0;
  }

  @media (max-width: 600px) {
    #hero .image {
      background-size: contain;
    }

    #hero h1 {
      font-weight: 300;
    }

    .btn.btn-xl {
      font-size: 20px;
      padding: 0.25em 2em;
    }

  }

  @media (max-width: 768px) {
    #ftp-credentials .col-xs-12.control-label {
      text-align: left;
    }
  }

</style>
</head>
<body>
  <div id="please-wait">
    <div class="sk-three-bounce">
      <div class="sk-child sk-bounce1"></div>
      <div class="sk-child sk-bounce2"></div>
      <div class="sk-child sk-bounce3"></div>
    </div>
  </div>

  <section id="hero" class="page-row">
  <div class="jumbotron">
    <div class="container">
      <h1>Access your Dropbox with FTP</h1>
      <div class="image"></div>
    </div>
  </div>
</section>

<section class="hide" id="connect-to-dropbox">
  <a class="btn btn-primary btn-xl btn-dropbox" href="https://www.dropbox.com/1/oauth2/authorize?client_id=qb5m6mf2vvjhssk&response_type=token">
  Connect your Dropbox
  </a>
  <p>Free trial. No credit card required.</p>
</section>

<section id="ftp-credentials" class="show-if-loggedin hidden">
  <h3 class="page-header"><span class="firstname"></span>’s FTP settings</h3>
  <div class="container">
    <div class="form-horizontal col-xs-12 col-sm-9">

      <div class="form-group form-group-lg">
        <label class="col-xs-12 col-sm-4 control-label">Host or Server</label>
        <div class="col-xs-12 col-sm-8">
          <input class="form-control" type="text" value="server.FTPforDropbox.com" readonly>
        </div>
      </div>

      <div class="form-group form-group-lg">
        <label class="col-xs-12 col-sm-4 control-label">Port</label>
        <div class="col-xs-12 col-sm-8">
          <input class="form-control" type="text" value="21" readonly>
        </div>
      </div>

      <div class="form-group form-group-lg">
        <label class="col-xs-12 col-sm-4 control-label">FTP Mode</label>
        <div class="col-xs-12 col-sm-8">
          <p class="form-control-static" style="text-align: left;"><i class="fa fa-check-square-o"></i> Passive Mode (PASV)</p>
        </div>
      </div>

      <div class="form-group form-group-lg">
        <label class="col-xs-12 col-sm-4 control-label">Username</label>
        <div class="col-xs-12 col-sm-8">
          <input data-user="email" class="form-control" type="text" value="" readonly>
        </div>
      </div>

      <div class="form-group form-group-lg">
        <label class="col-xs-12 col-sm-4 control-label">Password</label>
        <div class="col-xs-12 col-sm-8">
          <div class="input-group">
            <input data-user="passphrase" id="password" class="form-control" type="password" value="hello" readonly>
            <span class="input-group-btn">
              <button class="btn btn-default btn-lg" data-toggle="button" type="button" id="showPassword" autocomplete="off"><i class="fa fa-eye"></i></button>
            </span>
          </div>
        </div>
      </div>

      <div class="form-group form-group-lg">
        <label class="col-xs-12 col-sm-4 control-label"></label>
        <div class="col-xs-12 col-sm-8">
          <button id="create-new-password" class="btn-lg btn btn-default">Set a new random password</button>
        </div>
      </div>

    </div>
  </div>
</section>
<footer>
  Made with ♡ by <a href="https://twitter.com/AndreasPizsa">Andreas Pizsa</a>.
</footer>

<script async type="text/javascript" src="//api.ftpfordropbox.com/ping"></script>
<script type="text/javascript" src="//cdn.jsdelivr.net/g/lodash@3.10,jquery@2,bootstrap@3,cookies.js,coffeescript,parse"></script>

<script type="text/coffeescript">
user = undefined

objectFromUrlParameters = (hash)->
  hashParameters = {}
  hash.split('&').forEach (keyValue)->
    [keyword,value] = keyValue.split '='
    hashParameters[keyword]=value
  return hashParameters

updateDropboxAuthentication = (accessToken)->
  $.ajax
    url:        '//api.ftpfordropbox.com/users/login'
    type:       'post'
    xhrFields:
      withCredentials: true
    headers:
      Authorization : "Bearer #{accessToken}"
  .then updateFieldsWithUserData
  .then (user)->
    analytics.identify user.analytics_id,
        email     : user.email
        firstName : user.firstname
        lastName  : user.lastname
  .fail ->
    true
  .always ->
      updateVisibleSection()
  true

updateFieldsWithUserData = (userData)->
  _.forOwn userData, (value,key)->
    $(".#{key}").text value
    $("input[data-user='#{key}']").val value

updateVisibleSection = ->
  visibleSection = if localStorage.access_token then '.show-if-loggedin' else '#connect-to-dropbox'
  $(visibleSection).removeClass('hide').removeClass('hidden').fadeIn()
  $('#please-wait').fadeOut();

updateAuthorizationReturnUrl = ->
  $link = $('a[href^="https://www.dropbox.com/1/oauth2/authorize"]')
  $link.attr 'href', $link.attr('href') + "&redirect_uri=" + encodeURIComponent window.location.href

hashParameters = objectFromUrlParameters window.location.hash.substr 1
history.pushState(
  ""
  document.title
  window.location.pathname + window.location.search
)

updateAuthorizationReturnUrl()

if hashParameters.access_token
  localStorage.access_token = hashParameters.access_token

if localStorage.access_token
  updateDropboxAuthentication localStorage.access_token
else
  updateVisibleSection()

togglePassword = (onOrOff)->
  currentState = $('#showPassword').hasClass 'active'
  newState = onOrOff ? not currentState
  if currentState isnt newState then $('#showPassword').click()

$('#showPassword').click ->
  $textField = $('#password')
  type=$textField.attr 'type'
  $textField.attr 'type', if type is 'password' then 'text' else 'password'

$('input').click -> $(@).focus().select()
$('#create-new-password').click ->
  $('#please-wait').fadeIn()
  $.ajax
    url:        '//api.ftpfordropbox.com/users/login'
    type:       'put'
    xhrFields:
      withCredentials: true
    headers:
      Authorization : "Bearer #{localStorage.access_token}"
  .then updateFieldsWithUserData
  .then togglePassword.bind this,true

  .always ->
    $('#please-wait').fadeOut()

</script>
</body>
</html>